{# @var plugin \vandres\matrixextended\MatrixExtended #}
{# @var settings \vandres\matrixextended\models\Settings #}
{% import '_includes/forms.twig' as forms %}

{% macro configWarning(setting) -%}
    {% set setting = '<code>'~setting~'</code>' %}
    {{ "This is being overridden by the {setting} config setting in your {file} config file."|t('matrix-extended', {
        setting: setting,
        file: '<code>matrix-extended.php</code>'
    })|raw }}
{%- endmacro %}

{% from _self import configWarning %}

{{ forms.lightswitchField({
    label:        'Extra delete button'|t('matrix-extended'),
    name:         'extraDeleteButton',
    id:           'extraDeleteButton',
    instructions: 'If there are a lot of entry types, this might come in handy.'|t('matrix-extended'),
    on:           settings.extraDeleteButton,
    disabled:     'extraDeleteButton' in overrides,
    warning:      'extraDeleteButton' in overrides ? configWarning('extraDeleteButton'),
}) }}

{{ forms.lightswitchField({
    label:        'Remove entry types from disclosure menu'|t('matrix-extended'),
    name:         'removeEntryTypesFromDiscloseMenu',
    id:           'removeEntryTypesFromDiscloseMenu',
    instructions: 'Removes the add buttons from the disclosure menu, so the menu gets more slick.'|t('matrix-extended'),
    on:           settings.removeEntryTypesFromDiscloseMenu,
    disabled:     'removeEntryTypesFromDiscloseMenu' in overrides,
    warning:      'removeEntryTypesFromDiscloseMenu' in overrides ? configWarning('removeEntryTypesFromDiscloseMenu'),
}) }}

{{ forms.lightswitchField({
    label:        'Enable experimental features'|t('matrix-extended'),
    name:         'experimentalFeatures',
    id:           'experimentalFeatures',
    instructions: 'Use experimental features right now. But they might not be for normal editorial users.'|t('matrix-extended'),
    on:           settings.experimentalFeatures,
    disabled:     'experimentalFeatures' in overrides,
    warning:      'experimentalFeatures' in overrides ? configWarning('experimentalFeatures'),
}) }}

{{ forms.lightswitchField({
    label:        'Enable drag and drop'|t('matrix-extended'),
    name:         'enableDragDrop',
    id:           'enableDragDrop',
    instructions: 'Enable drag and drop support, even allowing dragging between matrix fields.'|t('matrix-extended'),
    on:           settings.enableDragDrop,
    disabled:     'enableDragDrop' in overrides,
    warning:      'enableDragDrop' in overrides ? configWarning('enableDragDrop'),
}) }}

{{ forms.lightswitchField({
    label:        'Expand menu'|t('matrix-extended'),
    name:         'expandMenu',
    id:           'expandMenu',
    instructions: 'Displays "add block" menu as button group.'|t('matrix-extended'),
    on:           settings.expandMenu,
    disabled:     'expandMenu' in overrides,
    warning:      'expandMenu' in overrides ? configWarning('expandMenu'),
}) }}

{{ forms.lightswitchField({
    label:        'Expand ungrouped'|t('matrix-extended'),
    name:         'expandUngrouped',
    id:           'expandUngrouped',
    instructions: 'Expands ungrouped elements, instead of grouping them under "New Entry".'|t('matrix-extended'),
    on:           settings.expandUngrouped,
    disabled:     'expandUngrouped' in overrides,
    warning:      'expandUngrouped' in overrides ? configWarning('expandUngrouped'),
}) }}

{{ forms.selectField({
    label: "Ungrouped position"|t('matrix-extended'),
    name: 'ungroupedPosition',
    id: 'ungroupedPosition',
    instructions: "Where to position the ungrouped elements?"|t('matrix-extended'),
    options: [
        {value: 'start', label: 'Start'|t('matrix-extended')},
        {value: 'end', label: 'End'|t('matrix-extended')},
    ],
    value: settings.ungroupedPosition,
    disabled:     'ungroupedPosition' in overrides,
    warning:      'ungroupedPosition' in overrides ? configWarning('ungroupedPosition'),
}) }}
