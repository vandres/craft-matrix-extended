{"version":3,"file":"nestedElementExtendedJs-39360094.js","sources":["../../../../../static/src/js/nestedElementExtended.ts"],"sourcesContent":["(function (window: any) {\n    const {Craft, Garnish, $} = window;\n    if (!Craft || !Garnish || !$) {\n        return;\n    }\n\n    /**\n     * @see https://github.com/craftcms/cms/blob/5.x/src/web/assets/cp/src/js/NestedElementManager.js\n     */\n    Craft.NestedElementExtended = Garnish.Base.extend({\n        settings: {}, childParent: {}, entryReference: undefined,\n\n        init: function (config: { settings: any, childParent: any, entryReference: any }) {\n            const self = this;\n\n            this.settings = config.settings || {};\n            this.childParent = config.childParent || {};\n            this.entryReference = config.entryReference || undefined;\n\n            if (!Garnish.DisclosureMenu || !Craft.NestedElementManager) {\n                return;\n            }\n\n            // for now\n            return;\n\n            const nestedInitFn = Craft.NestedElementManager.prototype.init;\n            Craft.NestedElementManager.prototype.init = function (...args: any[]) {\n                nestedInitFn.apply(this, args);\n                if (!self.settings.experimentalFeatures) {\n                    return;\n                }\n\n                const parent = this;\n                if (parent.settings.mode !== 'cards' || !parent.settings.canCreate) {\n                    return;\n                }\n\n                console.log('NestedElementManager');\n\n                console.log(parent.settings);\n                console.log(self.settings);\n\n                const disclosureMenuShowFn = Garnish.DisclosureMenu.prototype.show;\n                Garnish.DisclosureMenu.prototype.show = function (...args: any[]) {\n                    self.initDisclosureMenu(this);\n                    disclosureMenuShowFn.apply(this, args);\n                };\n\n            };\n        },\n\n        initDisclosureMenu(disclosureMenu: any) {\n            console.log('initDisclosureMenu');\n            const {$trigger, $container} = disclosureMenu;\n            if (!$trigger || !$container || !$trigger.hasClass('action-btn')) {\n                return;\n            }\n\n            const $element = $trigger.closest('.card-actions').parent('.card-actions-container').parent('.card');\n            if (!$element.length) {\n                return;\n            }\n\n            const {typeId, id} = $element.data();\n            if (!typeId || !id) {\n                return;\n            }\n\n            console.log($element.data());\n        },\n    });\n})(window);\n"],"names":["window","Craft","Garnish","$","config","disclosureMenu","$trigger","$container","$element","typeId","id"],"mappings":"CAAC,SAAUA,EAAa,CACpB,KAAM,CAAC,MAAAC,EAAO,QAAAC,EAAS,EAAAC,CAAA,EAAKH,EACxB,CAACC,GAAS,CAACC,GAAW,CAACC,IAOrBF,EAAA,sBAAwBC,EAAQ,KAAK,OAAO,CAC9C,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,eAAgB,OAE/C,KAAM,SAAUE,EAAkE,CAGzE,KAAA,SAAWA,EAAO,UAAY,CAAA,EAC9B,KAAA,YAAcA,EAAO,aAAe,CAAA,EACpC,KAAA,eAAiBA,EAAO,gBAAkB,OAE3C,CAACF,EAAQ,gBAAmBD,EAAM,oBA+B1C,EAEA,mBAAmBI,EAAqB,CACpC,QAAQ,IAAI,oBAAoB,EAC1B,KAAA,CAAC,SAAAC,EAAU,WAAAC,CAAc,EAAAF,EAC3B,GAAA,CAACC,GAAY,CAACC,GAAc,CAACD,EAAS,SAAS,YAAY,EAC3D,OAGE,MAAAE,EAAWF,EAAS,QAAQ,eAAe,EAAE,OAAO,yBAAyB,EAAE,OAAO,OAAO,EAC/F,GAAA,CAACE,EAAS,OACV,OAGJ,KAAM,CAAC,OAAAC,EAAQ,GAAAC,CAAE,EAAIF,EAAS,KAAK,EAC/B,CAACC,GAAU,CAACC,GAIR,QAAA,IAAIF,EAAS,KAAM,CAAA,CAC/B,CAAA,CACH,EACL,GAAG,MAAM"}